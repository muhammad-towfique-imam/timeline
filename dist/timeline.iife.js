var $timeline=function(S){"use strict";var Rt=Object.defineProperty;var Ot=S=>{throw TypeError(S)};var Bt=(S,H,W)=>H in S?Rt(S,H,{enumerable:!0,configurable:!0,writable:!0,value:W}):S[H]=W;var dt=(S,H,W)=>Bt(S,typeof H!="symbol"?H+"":H,W),xt=(S,H,W)=>H.has(S)||Ot("Cannot "+W);var a=(S,H,W)=>(xt(S,H,"read from private field"),W?W.call(S):H.get(S)),N=(S,H,W)=>H.has(S)?Ot("Cannot add the same private member more than once"):H instanceof WeakSet?H.add(S):H.set(S,W),E=(S,H,W,at)=>(xt(S,H,"write to private field"),at?at.call(S,W):H.set(S,W),W),q=(S,H,W)=>(xt(S,H,"access private method"),W);var ut,tt,ot,X,V,F,st,G,et,K,L,Ct,Ht,Ft,Lt,zt,_t,Et,Wt,vt,ft,ht,$t;function H(g){return{all:g=g||new Map,on:function(t,i){var r=g.get(t);r?r.push(i):g.set(t,[i])},off:function(t,i){var r=g.get(t);r&&(i?r.splice(r.indexOf(i)>>>0,1):g.set(t,[]))},emit:function(t,i){var r=g.get(t);r&&r.slice().map(function($){$(i)}),(r=g.get("*"))&&r.slice().map(function($){$(t,i)})}}}var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var yt={exports:{}};(function(g,t){(function(i,r){g.exports=r()})(W,function(){var i=1e3,r=6e4,$=36e5,p="millisecond",f="second",l="minute",c="hour",y="day",z="week",D="month",Y="quarter",T="year",v="date",o="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var n=["th","st","nd","rd"],e=u%100;return"["+u+(n[(e-20)%10]||n[e]||n[0])+"]"}},b=function(u,n,e){var h=String(u);return!h||h.length>=n?u:""+Array(n+1-h.length).join(e)+u},A={s:b,z:function(u){var n=-u.utcOffset(),e=Math.abs(n),h=Math.floor(e/60),s=e%60;return(n<=0?"+":"-")+b(h,2,"0")+":"+b(s,2,"0")},m:function u(n,e){if(n.date()<e.date())return-u(e,n);var h=12*(e.year()-n.year())+(e.month()-n.month()),s=n.clone().add(h,D),m=e-s<0,d=n.clone().add(h+(m?-1:1),D);return+(-(h+(e-s)/(m?s-d:d-s))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:D,y:T,w:z,d:y,D:v,h:c,m:l,s:f,ms:p,Q:Y}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},O="en",I={};I[O]=_;var Z="$isDayjsObject",Q=function(u){return u instanceof pt||!(!u||!u[Z])},B=function u(n,e,h){var s;if(!n)return O;if(typeof n=="string"){var m=n.toLowerCase();I[m]&&(s=m),e&&(I[m]=e,s=m);var d=n.split("-");if(!s&&d.length>1)return u(d[0])}else{var w=n.name;I[w]=n,s=w}return!h&&s&&(O=s),s||!h&&O},C=function(u,n){if(Q(u))return u.clone();var e=typeof n=="object"?n:{};return e.date=u,e.args=arguments,new pt(e)},M=A;M.l=B,M.i=Q,M.w=function(u,n){return C(u,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var pt=function(){function u(e){this.$L=B(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[Z]=!0}var n=u.prototype;return n.parse=function(e){this.$d=function(h){var s=h.date,m=h.utc;if(s===null)return new Date(NaN);if(M.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var d=s.match(x);if(d){var w=d[2]-1||0,P=(d[7]||"0").substring(0,3);return m?new Date(Date.UTC(d[1],w,d[3]||1,d[4]||0,d[5]||0,d[6]||0,P)):new Date(d[1],w,d[3]||1,d[4]||0,d[5]||0,d[6]||0,P)}}return new Date(s)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return M},n.isValid=function(){return this.$d.toString()!==o},n.isSame=function(e,h){var s=C(e);return this.startOf(h)<=s&&s<=this.endOf(h)},n.isAfter=function(e,h){return C(e)<this.startOf(h)},n.isBefore=function(e,h){return this.endOf(h)<C(e)},n.$g=function(e,h,s){return M.u(e)?this[h]:this.set(s,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,h){var s=this,m=!!M.u(h)||h,d=M.p(e),w=function(rt,R){var it=M.w(s.$u?Date.UTC(s.$y,R,rt):new Date(s.$y,R,rt),s);return m?it:it.endOf(y)},P=function(rt,R){return M.w(s.toDate()[rt].apply(s.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(R)),s)},U=this.$W,j=this.$M,J=this.$D,ct="set"+(this.$u?"UTC":"");switch(d){case T:return m?w(1,0):w(31,11);case D:return m?w(1,j):w(0,j+1);case z:var nt=this.$locale().weekStart||0,lt=(U<nt?U+7:U)-nt;return w(m?J-lt:J+(6-lt),j);case y:case v:return P(ct+"Hours",0);case c:return P(ct+"Minutes",1);case l:return P(ct+"Seconds",2);case f:return P(ct+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,h){var s,m=M.p(e),d="set"+(this.$u?"UTC":""),w=(s={},s[y]=d+"Date",s[v]=d+"Date",s[D]=d+"Month",s[T]=d+"FullYear",s[c]=d+"Hours",s[l]=d+"Minutes",s[f]=d+"Seconds",s[p]=d+"Milliseconds",s)[m],P=m===y?this.$D+(h-this.$W):h;if(m===D||m===T){var U=this.clone().set(v,1);U.$d[w](P),U.init(),this.$d=U.set(v,Math.min(this.$D,U.daysInMonth())).$d}else w&&this.$d[w](P);return this.init(),this},n.set=function(e,h){return this.clone().$set(e,h)},n.get=function(e){return this[M.p(e)]()},n.add=function(e,h){var s,m=this;e=Number(e);var d=M.p(h),w=function(j){var J=C(m);return M.w(J.date(J.date()+Math.round(j*e)),m)};if(d===D)return this.set(D,this.$M+e);if(d===T)return this.set(T,this.$y+e);if(d===y)return w(1);if(d===z)return w(7);var P=(s={},s[l]=r,s[c]=$,s[f]=i,s)[d]||1,U=this.$d.getTime()+e*P;return M.w(U,this)},n.subtract=function(e,h){return this.add(-1*e,h)},n.format=function(e){var h=this,s=this.$locale();if(!this.isValid())return s.invalidDate||o;var m=e||"YYYY-MM-DDTHH:mm:ssZ",d=M.z(this),w=this.$H,P=this.$m,U=this.$M,j=s.weekdays,J=s.months,ct=s.meridiem,nt=function(R,it,mt,Mt){return R&&(R[it]||R(h,m))||mt[it].slice(0,Mt)},lt=function(R){return M.s(w%12||12,R,"0")},rt=ct||function(R,it,mt){var Mt=R<12?"AM":"PM";return mt?Mt.toLowerCase():Mt};return m.replace(k,function(R,it){return it||function(mt){switch(mt){case"YY":return String(h.$y).slice(-2);case"YYYY":return M.s(h.$y,4,"0");case"M":return U+1;case"MM":return M.s(U+1,2,"0");case"MMM":return nt(s.monthsShort,U,J,3);case"MMMM":return nt(J,U);case"D":return h.$D;case"DD":return M.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return nt(s.weekdaysMin,h.$W,j,2);case"ddd":return nt(s.weekdaysShort,h.$W,j,3);case"dddd":return j[h.$W];case"H":return String(w);case"HH":return M.s(w,2,"0");case"h":return lt(1);case"hh":return lt(2);case"a":return rt(w,P,!0);case"A":return rt(w,P,!1);case"m":return String(P);case"mm":return M.s(P,2,"0");case"s":return String(h.$s);case"ss":return M.s(h.$s,2,"0");case"SSS":return M.s(h.$ms,3,"0");case"Z":return d}return null}(R)||d.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,h,s){var m,d=this,w=M.p(h),P=C(e),U=(P.utcOffset()-this.utcOffset())*r,j=this-P,J=function(){return M.m(d,P)};switch(w){case T:m=J()/12;break;case D:m=J();break;case Y:m=J()/3;break;case z:m=(j-U)/6048e5;break;case y:m=(j-U)/864e5;break;case c:m=j/$;break;case l:m=j/r;break;case f:m=j/i;break;default:m=j}return s?m:M.a(m)},n.daysInMonth=function(){return this.endOf(D).$D},n.$locale=function(){return I[this.$L]},n.locale=function(e,h){if(!e)return this.$L;var s=this.clone(),m=B(e,h,!0);return m&&(s.$L=m),s},n.clone=function(){return M.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},u}(),wt=pt.prototype;return C.prototype=wt,[["$ms",p],["$s",f],["$m",l],["$H",c],["$W",y],["$M",D],["$y",T],["$D",v]].forEach(function(u){wt[u[1]]=function(n){return this.$g(n,u[0],u[1])}}),C.extend=function(u,n){return u.$i||(u(n,pt,C),u.$i=!0),C},C.locale=B,C.isDayjs=Q,C.unix=function(u){return C(1e3*u)},C.en=I[O],C.Ls=I,C.p={},C})})(yt);var Pt=yt.exports;const Dt=at(Pt);var St={exports:{}};(function(g,t){(function(i,r){g.exports=r()})(W,function(){var i="minute",r=/[+-]\d\d(?::?\d\d)?/g,$=/([+-]|\d\d)/g;return function(p,f,l){var c=f.prototype;l.utc=function(o){var x={date:o,utc:!0,args:arguments};return new f(x)},c.utc=function(o){var x=l(this.toDate(),{locale:this.$L,utc:!0});return o?x.add(this.utcOffset(),i):x},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var y=c.parse;c.parse=function(o){o.utc&&(this.$u=!0),this.$utils().u(o.$offset)||(this.$offset=o.$offset),y.call(this,o)};var z=c.init;c.init=function(){if(this.$u){var o=this.$d;this.$y=o.getUTCFullYear(),this.$M=o.getUTCMonth(),this.$D=o.getUTCDate(),this.$W=o.getUTCDay(),this.$H=o.getUTCHours(),this.$m=o.getUTCMinutes(),this.$s=o.getUTCSeconds(),this.$ms=o.getUTCMilliseconds()}else z.call(this)};var D=c.utcOffset;c.utcOffset=function(o,x){var k=this.$utils().u;if(k(o))return this.$u?0:k(this.$offset)?D.call(this):this.$offset;if(typeof o=="string"&&(o=function(O){O===void 0&&(O="");var I=O.match(r);if(!I)return null;var Z=(""+I[0]).match($)||["-",0,0],Q=Z[0],B=60*+Z[1]+ +Z[2];return B===0?0:Q==="+"?B:-B}(o),o===null))return this;var _=Math.abs(o)<=16?60*o:o,b=this;if(x)return b.$offset=_,b.$u=o===0,b;if(o!==0){var A=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(_+A,i)).$offset=_,b.$x.$localOffset=A}else b=this.utc();return b};var Y=c.format;c.format=function(o){var x=o||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return Y.call(this,x)},c.valueOf=function(){var o=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*o},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var T=c.toDate;c.toDate=function(o){return o==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():T.call(this)};var v=c.diff;c.diff=function(o,x,k){if(o&&this.$u===o.$u)return v.call(this,o,x,k);var _=this.local(),b=l(o).local();return v.call(_,b,x,k)}}})})(St);var kt=St.exports;const It=at(kt);var Yt={exports:{}};(function(g,t){(function(i,r){g.exports=r()})(W,function(){var i={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function($,p,f){var l,c=function(Y,T,v){v===void 0&&(v={});var o=new Date(Y),x=function(k,_){_===void 0&&(_={});var b=_.timeZoneName||"short",A=k+"|"+b,O=r[A];return O||(O=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:k,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[A]=O),O}(T,v);return x.formatToParts(o)},y=function(Y,T){for(var v=c(Y,T),o=[],x=0;x<v.length;x+=1){var k=v[x],_=k.type,b=k.value,A=i[_];A>=0&&(o[A]=parseInt(b,10))}var O=o[3],I=O===24?0:O,Z=o[0]+"-"+o[1]+"-"+o[2]+" "+I+":"+o[4]+":"+o[5]+":000",Q=+Y;return(f.utc(Z).valueOf()-(Q-=Q%1e3))/6e4},z=p.prototype;z.tz=function(Y,T){Y===void 0&&(Y=l);var v,o=this.utcOffset(),x=this.toDate(),k=x.toLocaleString("en-US",{timeZone:Y}),_=Math.round((x-new Date(k))/1e3/60),b=15*-Math.round(x.getTimezoneOffset()/15)-_;if(!Number(b))v=this.utcOffset(0,T);else if(v=f(k,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(b,!0),T){var A=v.utcOffset();v=v.add(o-A,"minute")}return v.$x.$timezone=Y,v},z.offsetName=function(Y){var T=this.$x.$timezone||f.tz.guess(),v=c(this.valueOf(),T,{timeZoneName:Y}).find(function(o){return o.type.toLowerCase()==="timezonename"});return v&&v.value};var D=z.startOf;z.startOf=function(Y,T){if(!this.$x||!this.$x.$timezone)return D.call(this,Y,T);var v=f(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return D.call(v,Y,T).tz(this.$x.$timezone,!0)},f.tz=function(Y,T,v){var o=v&&T,x=v||T||l,k=y(+f(),x);if(typeof Y!="string")return f(Y).tz(x);var _=function(I,Z,Q){var B=I-60*Z*1e3,C=y(B,Q);if(Z===C)return[B,Z];var M=y(B-=60*(C-Z)*1e3,Q);return C===M?[B,C]:[I-60*Math.min(C,M)*1e3,Math.max(C,M)]}(f.utc(Y,o).valueOf(),k,x),b=_[0],A=_[1],O=f(b).utcOffset(A);return O.$x.$timezone=x,O},f.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},f.tz.setDefault=function(Y){l=Y}}})})(Yt);var Ut=Yt.exports;const Xt=at(Ut);Dt.extend(It),Dt.extend(Xt);const gt=(g,t="MM/DD HH:mm Z",i)=>Dt(g).tz(i).format(t),Tt=(g,t)=>{let i,r=0;return(...$)=>{const p=Date.now(),f=p-r;!r||f>=t?(r=p,g.apply(void 0,$)):i||(i=setTimeout(()=>{r=p,g.apply(void 0,$),i=null},t-f))}},bt=g=>{const[t,i]=[g[0],g[1]],r=i.clientX-t.clientX,$=i.clientY-t.clientY;return Math.sqrt(r*r+$*$)},At=(g,t)=>{const i=document.createElement("canvas");i.width=i.height=1;const r=i.getContext("2d");r.fillStyle=g,r.fillRect(0,0,1,1);const $=r.getImageData(0,0,1,1).data;return`rgba(${$[0]}, ${$[1]}, ${$[2]}, ${t})`},Zt=({xCenterPoint:g,cfg:t,timePerPixel:i,timeSpacing:r,currentTime:$,$canvas:p,screenScaleCount:f,scaleHeight:l,startTime:c,drawLine:y,drawText:z,drawArea:D})=>{const Y=({space:v,scaleTimeFormat:o,bgTimeFormat:x,pointerTimeFormat:k,timezone:_})=>{z({x:p.width-g/10,y:6,text:gt($,x,_),fontSize:`${p.height-5}px`,align:"right",baseLine:"top",color:t.bgTextColor});const b=c%r,A=b/i;for(let O=0;O<f;O++){const I=O*t.scaleSpacing-A-t.pointerWidth/2,Z=c+O*r-b;if(Z%(r*v)===0){y({x:I,y:l.long}),z({x:I,y:p.height-l.long-5,text:gt(Z,o,_),baseLine:"bottom"});continue}y({x:I,y:l.short})}y({x:g-t.pointerWidth/2,y:p.height,width:t.pointerWidth,color:t.pointerColor}),D({startX:g-t.pointerDisplayWidth/2,startY:4,endX:g+t.pointerDisplayWidth/2,endY:4+t.pointerDisplayHeight,bgColor:t.pointerColor}),z({x:g,y:t.pointerDisplayHeight/2+5,text:gt($,k,_),align:"center",baseLine:"middle"})},T=t.thresholdsConfig[r];T&&Y({space:T.space,scaleTimeFormat:T.scaleTimeFormat,bgTimeFormat:T.bgTimeFormat,pointerTimeFormat:T.pointerTimeFormat,timezone:t.timezone})},jt={fill:!0,width:1e3,height:60,bgColor:"rgba(0,0,0,0.5)",textColor:"#ffffff",fontFamily:"Arial",scaleColor:"#ffffff",scaleSpacing:7,areaBgColor:"#ffffff55",pointerColor:"#00aeec",pointerWidth:3,pointerDisplayWidth:100,pointerDisplayHeight:14,fps:60,zoom:3,timeSpacingList:[10,100,1e3,1e4,6e4,6e5,36e5,864e5,6048e5],thresholdsConfig:{10:{scaleTimeFormat:"mm:ss:SSS",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},100:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},1e3:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},1e4:{scaleTimeFormat:"HH:mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:12},6e4:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},6e5:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},36e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"MM/DD HH:mm",space:12},864e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"YYYY/MM/DD HH:mm",space:12},6048e5:{scaleTimeFormat:"YYYY/MM/DD",bgTimeFormat:"YYYY",pointerTimeFormat:"YYYY/MM/DD",space:10}}};class Nt{constructor(t,i){N(this,L);dt(this,"$canvas");dt(this,"$canvasParent");dt(this,"ctx");dt(this,"cfg");N(this,ut);N(this,tt);N(this,ot,H());N(this,X,0);N(this,V);N(this,F);N(this,st);N(this,G,!1);N(this,et,null);N(this,K,null);N(this,vt,({x:t,y:i,width:r=1,color:$=this.cfg.scaleColor})=>{this.ctx.beginPath(),this.ctx.moveTo(t,this.$canvas.height),this.ctx.lineTo(t,this.$canvas.height-i),this.ctx.closePath(),this.ctx.strokeStyle=$,this.ctx.lineWidth=r,this.ctx.stroke()});N(this,ft,({x:t,y:i,text:r,color:$=this.cfg.textColor,fontSize:p="11px",align:f="center",baseLine:l="alphabetic"})=>{this.ctx.beginPath(),this.ctx.font=`${p} ${this.cfg.fontFamily}`,this.ctx.fillStyle=$,this.ctx.textAlign=f,this.ctx.textBaseline=l,this.ctx.fillText(r,t,i)});N(this,ht,({startX:t,startY:i,endX:r,endY:$,bgColor:p})=>{this.ctx.beginPath(),this.ctx.rect(t,i,r-t,$-i),this.ctx.fillStyle=p,this.ctx.fill()});if(!t)throw new Error("canvas Element Or Element ID is required!");typeof t=="string"?this.$canvas=document.querySelector(t):this.$canvas=t,this.ctx=this.$canvas.getContext("2d"),this.cfg={...jt,...i},i!=null&&i.pointColor&&(this.cfg.pointerColor=i.pointColor),i!=null&&i.pointWidth&&(this.cfg.pointerWidth=i.pointWidth);const{fill:r,width:$,height:p,zoom:f,timeSpacingList:l,scaleHeight:c,textColor:y,bgTextColor:z}=this.cfg;if(z||(this.cfg.bgTextColor=At(y,.18)),f<0||f>=l.length||f%1!==0)throw new Error(`zoom must be 0 ~ ${l.length-1}, and must be an integer`);if(r){const D=this.$canvas.parentElement;this.$canvasParent=D,this.$canvas.width=D.clientWidth,this.$canvas.height=D.clientHeight,new ResizeObserver(Tt(q(this,L,_t).bind(this),200)).observe(D)}else this.$canvas.width=$,this.$canvas.height=p;E(this,F,l[f]),c!=null&&c.long&&(c!=null&&c.short)?E(this,st,c):E(this,st,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw(),this.$canvas.addEventListener("wheel",q(this,L,Ht).bind(this),{passive:!1}),this.$canvas.addEventListener("mousedown",q(this,L,Ct).bind(this)),this.$canvas.addEventListener("touchstart",q(this,L,Ft).bind(this),{passive:!1}),this.$canvas.addEventListener("touchmove",Tt(q(this,L,Lt).bind(this),1e3/this.cfg.fps),{passive:!1}),this.$canvas.addEventListener("touchend",q(this,L,zt).bind(this))}draw({currentTime:t,areas:i,_privateFlag:r}={}){if(a(this,G)&&!r)return;E(this,X,t||Date.now()),E(this,V,i||[]);const $=this.$canvas.width/2,p=Math.ceil(this.$canvas.width/this.cfg.scaleSpacing),f=p*a(this,F),[l,c]=E(this,ut,[a(this,X)-f/2,a(this,X)+f/2]);E(this,tt,f/this.$canvas.width),q(this,L,Et).call(this),a(this,ht).call(this,{startX:0,startY:0,endX:this.$canvas.width,endY:this.$canvas.height,bgColor:this.cfg.bgColor}),a(this,V).forEach(y=>{const z=y.startTime<=l?0:Math.round((y.startTime-l)/a(this,tt)),D=y.endTime>=c?this.$canvas.width:Math.round((y.endTime-l)/a(this,tt));z<this.$canvas.width&&D>0&&a(this,ht).call(this,{startX:z,startY:0,endX:D,endY:this.$canvas.height,bgColor:y.bgColor||this.cfg.areaBgColor})}),Zt.bind(this)({xCenterPoint:$,screenScaleCount:p,startTime:l,timePerPixel:a(this,tt),scaleHeight:a(this,st),timeSpacing:a(this,F),currentTime:a(this,X),$canvas:this.$canvas,cfg:this.cfg,drawLine:a(this,vt).bind(this),drawText:a(this,ft).bind(this),drawArea:a(this,ht).bind(this)}),q(this,L,Wt).call(this)}getCurrentTime(){return a(this,X)}getTimeRange(){return a(this,ut)}getMsPerPixel(){return a(this,tt)}on(t,i){a(this,ot).on(t,i)}off(t,i){a(this,ot).off(t,i)}}return ut=new WeakMap,tt=new WeakMap,ot=new WeakMap,X=new WeakMap,V=new WeakMap,F=new WeakMap,st=new WeakMap,G=new WeakMap,et=new WeakMap,K=new WeakMap,L=new WeakSet,Ct=function(t){E(this,G,!0);let i=t.clientX,r=a(this,X);const $=Tt(({clientX:l})=>{a(this,G)&&(r=Math.round(a(this,X)-a(this,F)/this.cfg.scaleSpacing*(l-i)),i=l,this.draw({currentTime:r,areas:a(this,V),_privateFlag:!0}))},1e3/this.cfg.fps),p=l=>{const c=this.$canvas.getBoundingClientRect(),y=l.clientX-c.left,z=l.clientY-c.top,D=3;(y<D||y>this.$canvas.width-D||z<D||z>this.$canvas.height-D)&&(this.$canvas.removeEventListener("mousemove",$),this.$canvas.removeEventListener("mousemove",p))},f=()=>{this.$canvas.removeEventListener("mousemove",$),this.$canvas.removeEventListener("mousemove",p),document.removeEventListener("mouseup",f),E(this,G,!1),q(this,L,$t).call(this,"dragged",r)};this.$canvas.addEventListener("mousemove",$),this.$canvas.addEventListener("mousemove",p),document.addEventListener("mouseup",f)},Ht=function(t){t.preventDefault();const i=this.cfg.timeSpacingList.findIndex(r=>r===a(this,F));t.deltaY<0&&i>0?(E(this,F,this.cfg.timeSpacingList[i-1]),this.draw({currentTime:a(this,X),areas:a(this,V),_privateFlag:!0}),q(this,L,$t).call(this,"zoom",i-1)):t.deltaY>0&&i<this.cfg.timeSpacingList.length-1&&(E(this,F,this.cfg.timeSpacingList[i+1]),this.draw({currentTime:a(this,X),areas:a(this,V),_privateFlag:!0}),q(this,L,$t).call(this,"zoom",i+1))},Ft=function(t){t.preventDefault(),E(this,G,!0),E(this,et,t.touches[0].clientX),t.touches.length===2&&E(this,K,bt(t.touches))},Lt=function(t){if(t.preventDefault(),!a(this,G))return;if(t.touches.length===2&&a(this,K)!==null){const p=bt(t.touches),f=Math.abs(a(this,K)-p)>=35;if(!f)return;let l=this.cfg.timeSpacingList.findIndex(c=>c===a(this,F));if(p<a(this,K)?l+=1:l-=1,l<0||l>this.cfg.timeSpacingList.length-1)return;E(this,F,this.cfg.timeSpacingList[l]),f&&E(this,K,p),this.draw({currentTime:a(this,X),areas:a(this,V),_privateFlag:!0});return}if(a(this,et)===null)return;const i=t.touches[0],r=i.clientX-a(this,et),$=Math.round(a(this,X)-a(this,F)/this.cfg.scaleSpacing*r);E(this,et,i.clientX),this.draw({currentTime:$,areas:a(this,V),_privateFlag:!0})},zt=function(t){a(this,G)&&(E(this,G,!1),E(this,et,null),t.touches.length<2&&E(this,K,null),q(this,L,$t).call(this,"dragged",a(this,X)))},_t=function(){this.$canvasParent&&(this.$canvas.width=this.$canvasParent.clientWidth,this.$canvas.height=this.$canvasParent.clientHeight,this.cfg.scaleHeight||E(this,st,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw({currentTime:a(this,X),areas:a(this,V)}))},Et=function(){this.ctx.clearRect(0,0,this.$canvas.width,this.$canvas.height)},Wt=function(){const t=()=>a(this,F)<1e3?`${a(this,F)}ms`:a(this,F)<6e4?`${Math.round(a(this,F)/100)/10}sec`:a(this,F)<36e5?`${Math.round(a(this,F)/100/60)/10}min`:a(this,F)<864e5?`${Math.round(a(this,F)/100/60/60)/10}hours`:a(this,F)<6048e5?`${Math.round(a(this,F)/100/60/60/24)/10}days`:`${Math.round(a(this,F)/100/60/60/24/7)/10}weeks`;a(this,ft).call(this,{x:this.cfg.scaleSpacing+12,y:9,text:t(),align:"left",baseLine:"middle"}),this.ctx.beginPath(),this.ctx.moveTo(5,6),this.ctx.lineTo(5,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,6),this.ctx.strokeStyle=this.cfg.scaleColor,this.ctx.lineWidth=1.5,this.ctx.stroke()},vt=new WeakMap,ft=new WeakMap,ht=new WeakMap,$t=function(...t){a(this,ot).emit(...t)},S.default=Nt,S.format=gt,Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),S}({});
